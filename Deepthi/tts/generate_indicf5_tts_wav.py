# ---------------------------------------------------------
# Modified scripts 

import requests

def generate_tts_wav(text: str, ref_audio_path: str, ref_text: str, output_file: str = "upload_test.wav"):
    url = "https://mesne-unlicentiously-allie.ngrok-free.dev/tts_wav"

    # Form fields (same as -F in curl)
    data = {
        "text": text,
        "ref_text": ref_text
    }

    # File field
    files = {
        "ref_audio_file": open(ref_audio_path, "rb")
    }

    try:
        response = requests.post(url, data=data, files=files)

        if response.status_code == 200:
            with open(output_file, "wb") as f:
                f.write(response.content)
            print(f"Audio saved as {output_file}")
        else:
            print("Request failed:", response.status_code)
            print(response.text)

    finally:
        files["ref_audio_file"].close()


if __name__ == "__main__":
    generate_tts_wav(
        # text="""
        # കേരളത്തിലെ ഒരു ചെറിയ ഗ്രാമമായ “മഴവില്ലൂർ” എന്ന സ്ഥലത്ത് പച്ചപ്പും നിശ്ശബ്ദതയും നിറഞ്ഞ പ്രകൃതിസൗന്ദര്യം കാണാം.
        # രാവിലെയാകുമ്പോൾ പുഴയുടെ കരയിൽ നിന്നുയരുന്ന മഞ്ഞുമൂടൽ, കാറ്റിൽ തലോടുന്ന നെൽകൃഷിത്തറകൾ, 
        # ദൂരെയായി കേൾക്കുന്ന ക്ഷേത്രമണിയുടെ ശബ്ദം—ഇവ എല്ലാം ചേർന്ന് ആ ഗ്രാമത്തിന് ഒരു സ്വപ്നസൗന്ദര്യം നൽകുന്നു.

        # ആ ഗ്രാമത്തിൽ താമസിക്കുന്ന രാമൻ എന്ന കർഷകൻ തന്റെ ജീവിതം മുഴുവൻ കൃഷിയോടാണ് ബന്ധിപ്പിച്ചിരുന്നത്.
        # “മണ്ണ് നമ്മളെ ഒരിക്കലും വഞ്ചിക്കില്ല,” എന്നായിരുന്നു അദ്ദേഹത്തിന്റെ വിശ്വാസം.
        # ഓരോ ദിവസവും രാവിലെ അഞ്ച് മണിക്ക് എഴുന്നേറ്റ്, കാപ്പി കുടിച്ച ശേഷം വയലിലേക്ക് പോകുന്നതായിരുന്നു പതിവ്.
        # മഴ ശരിയായി കിട്ടിയാൽ നെൽ വിളവ് നല്ലതാകും, ഇല്ലെങ്കിൽ കടം കൂടും—ഇതാണ് അവന്റെ ജീവിതത്തിലെ സ്ഥിരമായ ആശങ്ക.

        # ഒരു ദിവസം ഗ്രാമത്തിലെ യുവാക്കൾ ഒത്തു ചേർന്ന് പുതിയ സാങ്കേതിക വിദ്യകളെക്കുറിച്ച് സംസാരിക്കാൻ തീരുമാനിച്ചു.
        # “സാറ്റലൈറ്റ് ഡാറ്റ ഉപയോഗിച്ച് വിളയുടെ ആരോഗ്യനില പരിശോധിക്കാം,” എന്ന് വിദ്യാർത്ഥിയായ അജയ് പറഞ്ഞു.
        # രാമൻ ആദ്യം ആശങ്കയോടെ ചോദിച്ചു: “ഇത് നമുക്ക് യഥാർത്ഥത്തിൽ സഹായകരമാകുമോ?”
        # """,
        # text= """
        # ഇന്നത്തെ ലോകത്ത് സാങ്കേതിക വിദ്യയുടെ വളർച്ച അതിവേഗത്തിലാണ്.
        # ആർട്ടിഫിഷ്യൽ ഇന്റലിജൻസ്, മെഷീൻ ലേണിംഗ്, റോബോട്ടിക്സ് എന്നീ മേഖലകൾ 
        # നമ്മുടെ ജോലി രീതികളെ മാറ്റിമറിക്കുന്നു. വിദ്യാഭ്യാസം, ആരോഗ്യരംഗം, കൃഷി, 
        # വ്യവസായം എന്നിവിടങ്ങളിൽ സാങ്കേതിക വിദ്യ വലിയ മാറ്റങ്ങൾ കൊണ്ടുവന്നിട്ടുണ്ട്. 
        # എന്നാൽ സ്വകാര്യതയും ഡാറ്റാ സുരക്ഷയും പോലുള്ള വിഷയങ്ങൾ നമ്മൾ ഗൗരവമായി 
        # പരിഗണിക്കേണ്ടതാണ്.
        # """,
        # text="""
        # ഇത്തരം ടെക്സ്റ്റ്-ടു-സ്പീച്ച് സിസ്റ്റങ്ങൾ വിദ്യാഭ്യാസ മേഖലയിലെ 
        # വിദ്യാർത്ഥികൾക്ക് പഠനം കൂടുതൽ എളുപ്പമാക്കാൻ സഹായിക്കുന്നു. 
        # ഓൺലൈൻ-ക്ലാസുകൾ, ഡിജിറ്റൽ-ലേണിംഗ്-പ്ലാറ്റ്-ഫോമുകൾ, 
        # മറ്റ് എഡ്യൂക്കേഷൻ-ആപ്ലിക്കേഷൻുകൾ എന്നിവയിൽ ഇത് ഉപയോഗിക്കുന്നു.
        # """,
        text="എനിക്ക് ഇന്ന് വളരെ സന്തോഷം ആണ്.",

        ref_audio_path="/home/aic_u3/aic_u3/Speech_Models/sound4_male.wav",
        # ref_text="ഇന്ന് കാലാവസ്ഥ വളരെ നല്ലതാണ്.", # sound2
        # ref_text="ഇന്ന് കാലാവസ്ഥ വളരെ നല്ലതാണ്. അതിനാൽ എനിക്ക് ഇന്ന് വളരെ സന്തോഷം ആണ്", #sound3
        ref_text="എനിക്ക് ഇന്ന് വളരെ സന്തോഷം ആണ്. ഇന്ന് കാലാവസ്ഥ വളരെ നല്ലതാണ്. ഞാൻ ശാന്തമായി സംസാരിക്കുന്നു.", #4
        # ref_text= """
        #         കേരളത്തിന്റെ പ്രഭാതകാലം വളരെ മനോഹരമാണ്. സൂര്യോദയത്തിന് മുമ്പ് 
        #         ആകാശം ഇളം ചുവപ്പും ഓറഞ്ചും നിറങ്ങളിൽ തിളങ്ങുന്നത് കാണുമ്പോൾ 
        #         മനസ്സ് നിറഞ്ഞ സന്തോഷം അനുഭവപ്പെടുന്നു. #sound9
        #         """,
        output_file="/home/aic_u3/aic_u3/Speech_Models/generated_audio/upload_test8_3.wav"
    )
